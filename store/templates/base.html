<!DOCTYPE html>
<html lang="{{ locale }}">

  <head>
    <title>{{ _("YunoHost app store") }}</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="{{ url_for('static', filename='tailwindcss.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='fork-awesome.min.css') }}" rel="preload">
    <style type="text/tailwindcss">
    @layer utilities {
      .btn {
          @apply text-sm font-medium rounded-md px-4 py-2 transition;
      }
      .btn-sm {
          @apply text-xs font-medium rounded-md px-2 py-2 transition;
      }
      .btn-success {
          @apply text-white bg-green-500 hover:bg-green-700;
      }
      .btn-primary {
          @apply text-white bg-blue-500 hover:bg-blue-700;
      }
      .btn-link {
          @apply bg-gray-100 hover:bg-gray-200;
      }
      .btn-primary-outline {
          @apply border text-blue-600 border-blue-500 hover:text-blue-400;
      }
      .from-markdown {
          @apply my-4;
      }
      .from-markdown p {
          @apply mb-2;
      }
      .from-markdown h3 {
          @apply text-xl mb-1 font-semibold;
      }
      .from-markdown ul {
          padding: revert;
          list-style: disc;
      }
      .from-markdown a {
          @apply text-blue-600;
      }
    }
    </style>
  </head>

  <body>
        <header class="pb-2">
          <div
            class="flex h-16 items-center gap-8 px-4 sm:px-6 lg:px-8"
          >
            <a class="block text-teal-600" href="/">
              <span class="sr-only">{{ _("Home") }}</span>
              <img src="{{ url_for('static', filename='ynh_logo_roundcorner.png') }}" style="height: 3em;" />
            </a>

            <div class="flex flex-1 items-center justify-end md:justify-between">
              <nav aria-label="Global" class="hidden md:block">
                <ul class="flex items-center gap-6 text-sm">
                  <li>
                    <a class="text-gray-800 font-bold transition hover:text-gray-500/75" href="{{ url_for('browse_catalog') }}">
                        {{ _("Catalog") }} 
                    </a>
                  </li>

                  <li>
                    <a class="text-gray-800 font-bold transition hover:text-gray-500/75" href="{{ url_for('browse_wishlist') }}">
                        {{ _("Wishlist") }} 
                    </a>
                  </li>
                </ul>
              </nav>

              <div class="flex items-center gap-4">
                <div class="sm:flex sm:gap-4">
                  <a
                    class="btn btn-primary-outline hidden md:inline-block"
                    href="https://yunohost.org/docs/"
                  >
                    <i class="fa fa-external-link fa-fw" aria-hidden="true"></i>
                    {{ _("YunoHost documentation") }} 
                  </a>
                  {% if not user %}
                  <a
                    class="btn btn-primary hidden md:inline-block"
                    href="{{ url_for('login_using_discourse') }}"
                  >
                     {{ _("Login using YunoHost's forum") }} 
                  </a>
                  {% else %}
                  <div class="relative">
                      <button
                        id="toggleUserMenu"
                        type="button"
                        class="group flex shrink-0 items-center rounded-lg transition"
                      >
                          <img
                            alt="Man"
                            src="{{ user['avatar_url'] }}"
                            class="h-10 w-10 rounded-full object-cover"
                          />
                          <p class="ms-2 hidden text-left text-xs sm:inline-block">
                            <strong class="block font-medium">{{ user['username'] }}</strong>
                          </p>
                          <i class="fa fa-caret-down fa-fw" aria-hidden="true"></i>
                      </button>
                      <div
                        id="userMenu"
                        class="hidden absolute end-0 z-10 mt-2 w-56 rounded-md border border-gray-100 bg-white shadow-lg"
                        role="menu"
                      >
                        <div class="p-2">
                          <a
                            href="/logout"
                            class="block rounded-lg px-4 py-2 text-sm text-gray-500 hover:bg-gray-50 hover:text-gray-700"
                            role="menuitem"
                          >
                            Logout
                          </a>
                        </div>
                     </div>
                  </div>
                  {% endif %}



                </div>

                <button
                  class="block rounded bg-gray-100 p-2.5 text-gray-600 transition hover:text-gray-600/75 md:hidden"
                >
                  <span class="sr-only">{{ _("Toggle menu") }}</span>
                  <i class="fa fa-bars h-5 w-5" aria-hidden="true"></i>
                </button>
              </div>
            </div>
          </div>
        </header>

        {% block main %}
        {% endblock %}

        <footer class="h-5 mt-5"></footer>
  </body>

  {% if user %}
  <script>
      let toggleUserMenu = document.getElementById('toggleUserMenu');
      toggleUserMenu.addEventListener('click', () => {
        document.getElementById('userMenu').classList.toggle("hidden");
      });
  </script>
  {% endif %}

</html>
